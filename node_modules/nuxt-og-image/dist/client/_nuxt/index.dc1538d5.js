import{g as y,r as u,h as k,i as W,j as t,k as b,l as d,m as B,u as D,n as S,q as F,o as $,c as H,a as I,s as w,v as o,_ as L,x as M,y as z,z as C,A as N,B as T,b as j,C as q}from"./entry.ac864471.js";const A=["width","height"],V=y({__name:"IFrameLoader",props:{src:String,aspectRatio:Number,description:String},setup(l){const c=l,h=u(c.src),n=k(),r=u(),s=u(0),a=W(()=>{let e=r.value;e||(e=document.querySelector("#iframe-loader"));const i=Date.now();e.src="";const m=t.value.width,_=t.value.height,f=e.offsetHeight,v=e.offsetWidth,g=f>_?1:f/_,x=v>m?1:v/m,R=x>g?g:x;s.value=0,e.style.opacity="0",e.onload=()=>{e.style.opacity="1",s.value=Date.now()-i},e.src=`${h.value}&scale=${R}&mode=${n.value}`},200);b(()=>{d(()=>c.src,e=>{h.value=e,a()},{immediate:!0}),d([()=>B.value,n],()=>{a()})}),D({bodyAttrs:{onresize:()=>{a()}}});const p=S(()=>c.description.replace("%s",s.value.toString()));return d(p,e=>{F.value=e}),(e,i)=>($(),H("div",{class:"w-full mx-auto h-full justify-center flex",style:w({maxHeight:`${o(t).height}px`,maxWidth:`${o(t).width}px`})},[I("iframe",{id:"iframe-loader",ref_key:"iframe",ref:r,class:"max-h-full",style:w({aspectRatio:l.aspectRatio}),width:o(t).width,height:o(t).height},null,12,A)],4))}});const E=L(V,[["__scopeId","data-v-cc6e66d7"]]),G={class:"flex h-full w-full"},Q=y({__name:"index",setup(l){var s,a;const c=((s=t.value)==null?void 0:s.height)||630,n=(((a=t.value)==null?void 0:a.width)||1200)/c,r=S(()=>M(`${T.value}/api/og-image-html`,{options:z.value,path:C.value,timestamp:N.value}));return(p,e)=>{const i=E;return $(),H("div",G,[j(i,{src:o(r),"aspect-ratio":n,description:"[HTML] Generated in %sms.",class:"max-h-full",onRefresh:o(q)},null,8,["src","onRefresh"])])}}});export{Q as default};
