import{c as k,u as K,s as $t,w as X,t as Ge,o as At,r as N,a as be,i as ot,d as ne,b as fe,e as Pt,f as z,g as se,h as _t,p as it,j as Ft,k as we,l as ye,m as Me,n as Lt,E as Bt,q as zt,A as $e,T as Ve,F as ke,I as je,N as Ce,v as Nt,x as at,y as Dt,O as Vt,z as Ye,B as Z,C as lt,D as Je,G as jt,H as Kt,J,_ as Ke,K as Ae,L as rt,M as Ue,P as He,Q as ee,R as B,S as H,U as F,V as oe,W as q,X as G,Y as Ee,Z as j,$ as Y,a0 as ue,a1 as ce,a2 as Ut,a3 as Ht,a4 as ut,a5 as Te,a6 as ct,a7 as We,a8 as xe,a9 as dt,aa as ht,ab as Wt,ac as qt,ad as ge,ae as Gt,af as Yt,ag as Jt,ah as Qt,ai as Xt,aj as Zt,ak as en,al as tn,am as nn,an as sn,ao as on,ap as an,aq as ln,ar as rn,as as un,at as cn,au as dn}from"./D8UErqBy.js";import{d as hn,e as fn}from"./DWL4WaSy.js";import{_ as ft,u as pt}from"./C78gyA8e.js";const pn={wrapper:"flex flex-col flex-1 min-h-0 divide-y divide-gray-100 dark:divide-gray-800",container:"relative flex-1 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-800 scroll-py-2",input:{wrapper:"relative flex items-center",base:"w-full placeholder-gray-400 dark:placeholder-gray-500 bg-transparent border-0 text-gray-900 dark:text-white focus:ring-0 focus:outline-none",padding:"px-4",height:"h-12",size:"sm:text-sm",icon:{base:"pointer-events-none absolute start-4 text-gray-400 dark:text-gray-500",loading:"animate-spin",size:"h-5 w-5",padding:"ps-11"},closeButton:{base:"absolute end-4",padding:"pe-10"}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",queryLabel:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},group:{wrapper:"p-2",label:"px-2.5 my-2 text-xs font-semibold text-gray-900 dark:text-white",container:"text-sm text-gray-700 dark:text-gray-200",command:{base:"flex justify-between select-none items-center rounded-md px-2.5 py-1.5 gap-2 relative",active:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactive:"",label:"flex items-center gap-1.5 min-w-0",prefix:"text-gray-400 dark:text-gray-500",suffix:"text-gray-400 dark:text-gray-500",container:"flex items-center gap-1.5 min-w-0",icon:{base:"flex-shrink-0 w-5 h-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"},disabled:"opacity-50",shortcuts:"hidden md:inline-flex flex-shrink-0 gap-0.5"},active:"flex-shrink-0 text-gray-500 dark:text-gray-400",inactive:"flex-shrink-0 text-gray-500 dark:text-gray-400"},default:{icon:"i-heroicons-magnifying-glass-20-solid",loadingIcon:"i-heroicons-arrow-path-20-solid",emptyState:{icon:"i-heroicons-magnifying-glass-20-solid",label:"We couldn't find any items.",queryLabel:"We couldn't find any items with that term. Please try again."},closeButton:null,selectedIcon:"i-heroicons-check-20-solid"}},vn={wrapper:"relative z-50",inner:"fixed inset-0 overflow-y-auto",container:"flex min-h-full items-end sm:items-center justify-center text-center",padding:"p-4 sm:p-0",margin:"sm:my-8",base:"relative text-left rtl:text-right flex flex-col",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},background:"bg-white dark:bg-gray-900",ring:"",rounded:"rounded-lg",shadow:"shadow-xl",width:"w-full sm:max-w-lg",height:"",fullscreen:"w-screen h-screen",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}};function de(e,s,t){let o=t.initialDeps??[],n;return()=>{var i,l,a,c;let u;t.key&&((i=t.debug)!=null&&i.call(t))&&(u=Date.now());const r=e();if(!(r.length!==o.length||r.some((g,O)=>o[O]!==g)))return n;o=r;let f;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(f=Date.now()),n=s(...r),t.key&&((a=t.debug)!=null&&a.call(t))){const g=Math.round((Date.now()-u)*100)/100,O=Math.round((Date.now()-f)*100)/100,T=O/16,A=(S,C)=>{for(S=String(S);S.length<C;)S=" "+S;return S};console.info(`%câ± ${A(O,5)} /${A(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*T,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(c=t==null?void 0:t.onChange)==null||c.call(t,n),n}}function Pe(e,s){if(e===void 0)throw new Error(`Unexpected undefined${s?`: ${s}`:""}`);return e}const mn=(e,s)=>Math.abs(e-s)<1,gn=e=>e,bn=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),o=[];for(let n=s;n<=t;n++)o.push(n);return o},yn=(e,s)=>{const t=e.scrollElement;if(!t)return;const o=i=>{const{width:l,height:a}=i;s({width:Math.round(l),height:Math.round(a)})};if(o(t.getBoundingClientRect()),typeof ResizeObserver>"u")return()=>{};const n=new ResizeObserver(i=>{const l=i[0];if(l!=null&&l.borderBoxSize){const a=l.borderBoxSize[0];if(a){o({width:a.inlineSize,height:a.blockSize});return}}o(t.getBoundingClientRect())});return n.observe(t,{box:"border-box"}),()=>{n.unobserve(t)}},xn=(e,s)=>{const t=e.scrollElement;if(!t)return;const o=()=>{s(t[e.options.horizontal?"scrollLeft":"scrollTop"])};return o(),t.addEventListener("scroll",o,{passive:!0}),()=>{t.removeEventListener("scroll",o)}},Sn=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},In=(e,{adjustments:s=0,behavior:t},o)=>{var n,i;const l=e+s;(i=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[o.options.horizontal?"left":"top"]:l,behavior:t})};class On{constructor(s){this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let t=null;const o=()=>t||(typeof ResizeObserver<"u"?t=new ResizeObserver(n=>{n.forEach(i=>{this._measureElement(i.target,i)})}):null);return{disconnect:()=>{var n;return(n=o())==null?void 0:n.disconnect()},observe:n=>{var i;return(i=o())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=o())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([o,n])=>{typeof n>"u"&&delete t[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:gn,rangeExtractor:bn,onChange:()=>{},measureElement:Sn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,...t}},this.notify=t=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,t)},this.maybeNotify=de(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{const t=this.options.getScrollElement();this.scrollElement!==t&&(this.cleanup(),this.scrollElement=t,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,o=>{this.scrollAdjustments=0,this.scrollOffset!==o&&(this.isScrollingTimeoutId!==null&&(clearTimeout(this.isScrollingTimeoutId),this.isScrollingTimeoutId=null),this.isScrolling=!0,this.scrollDirection=this.scrollOffset<o?"forward":"backward",this.scrollOffset=o,this.maybeNotify(),this.isScrollingTimeoutId=setTimeout(()=>{this.isScrollingTimeoutId=null,this.isScrolling=!1,this.scrollDirection=null,this.maybeNotify()},this.options.scrollingDelay))})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.memoOptions=de(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(t,o,n,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:n,getItemKey:i}),{key:!1}),this.getFurthestMeasurement=(t,o)=>{const n=new Map,i=new Map;for(let l=o-1;l>=0;l--){const a=t[l];if(n.has(a.lane))continue;const c=i.get(a.lane);if(c==null||a.end>c.end?i.set(a.lane,a):a.end<c.end&&n.set(a.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,a)=>l.end===a.end?l.index-a.index:l.end-a.end)[0]:void 0},this.getMeasurements=de(()=>[this.memoOptions(),this.itemSizeCache],({count:t,paddingStart:o,scrollMargin:n,getItemKey:i},l)=>{const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,a);for(let u=a;u<t;u++){const r=i(u),d=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),f=d?d.end+this.options.gap:o+n,g=l.get(r),O=typeof g=="number"?g:this.options.estimateSize(u),T=f+O,A=d?d.lane:u%this.options.lanes;c[u]={index:u,start:f,size:O,end:T,key:r,lane:A}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=de(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(t,o,n)=>this.range=t.length>0&&o>0?wn({measurements:t,outerSize:o,scrollOffset:n}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=de(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,o,n,i)=>o===null?[]:t({...o,overscan:n,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const o=this.options.indexAttribute,n=t.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(t,o)=>{const n=this.measurementsCache[this.indexFromElement(t)];if(!n||!t.isConnected){this.measureElementCache.forEach((a,c)=>{a===t&&(this.observer.unobserve(t),this.measureElementCache.delete(c))});return}const i=this.measureElementCache.get(n.key);i!==t&&(i&&this.observer.unobserve(i),this.observer.observe(t),this.measureElementCache.set(n.key,t));const l=this.options.measureElement(t,o,this);this.resizeItem(n,l)},this.resizeItem=(t,o)=>{const n=this.itemSizeCache.get(t.key)??t.size,i=o-n;i!==0&&(t.start<this.scrollOffset+this.scrollAdjustments&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,o)),this.notify(!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=de(()=>[this.getIndexes(),this.getMeasurements()],(t,o)=>{const n=[];for(let i=0,l=t.length;i<l;i++){const a=t[i],c=o[a];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const o=this.getMeasurements();return Pe(o[vt(0,o.length-1,n=>Pe(o[n]).start,t)])},this.getOffsetForAlignment=(t,o)=>{const n=this.getSize();o==="auto"&&(t<=this.scrollOffset?o="start":t>=this.scrollOffset+n?o="end":o="start"),o==="start"?t=t:o==="end"?t=t-n:o==="center"&&(t=t-n/2);const i=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-this.getSize();return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,o="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const n=Pe(this.getMeasurements()[t]);if(o==="auto")if(n.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)o="end";else if(n.start<=this.scrollOffset+this.options.scrollPaddingStart)o="start";else return[this.scrollOffset,o];const i=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,o),o]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&(clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:o="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(t,{align:o="auto",behavior:n}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[i,l]=this.getOffsetForIndex(t,o);this._scrollToOffset(i,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&(this.scrollToIndexTimeoutId=setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(t))){const[c]=this.getOffsetForIndex(t,l);mn(c,this.scrollOffset)||this.scrollToIndex(t,{align:l,behavior:n})}else this.scrollToIndex(t,{align:l,behavior:n})}))},this.scrollBy=(t,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+t,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var t;const o=this.getMeasurements();let n;return o.length===0?n=this.options.paddingStart:n=this.options.lanes===1?((t=o[o.length-1])==null?void 0:t.end)??0:Math.max(...o.slice(-this.options.lanes).map(i=>i.end)),n-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:o,behavior:n})=>{this.options.scrollToFn(t,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(t=>{this.itemSizeCache.set(t.key,t.size)}),this.maybeNotify()}}const vt=(e,s,t,o)=>{for(;e<=s;){const n=(e+s)/2|0,i=t(n);if(i<o)e=n+1;else if(i>o)s=n-1;else return n}return e>0?e-1:0};function wn({measurements:e,outerSize:s,scrollOffset:t}){const o=e.length-1,i=vt(0,o,a=>e[a].start,t);let l=i;for(;l<o&&e[l].end<t+s;)l++;return{startIndex:i,endIndex:l}}function Mn(e){const s=new On(K(e)),t=$t(s),o=s._didMount();return X(()=>K(e).getScrollElement(),n=>{n&&s._willUpdate()},{immediate:!0}),X(()=>K(e),n=>{s.setOptions({...n,onChange:(i,l)=>{var a;Ge(t),(a=n.onChange)==null||a.call(n,i,l)}}),s._willUpdate(),Ge(t)},{immediate:!0}),At(o),t}function kn(e){return Mn(k(()=>({observeElementRect:yn,observeElementOffset:xn,scrollToFn:In,...K(e)})))}function Qe(e){return[e.screenX,e.screenY]}function Cn(){let e=N([-1,-1]);return{wasMoved(s){let t=Qe(s);return e.value[0]===t[0]&&e.value[1]===t[1]?!1:(e.value=t,!0)},update(s){e.value=Qe(s)}}}function En({container:e,accept:s,walk:t,enabled:o}){be(()=>{let n=e.value;if(!n||o!==void 0&&!o.value)return;let i=ot(e);if(!i)return;let l=Object.assign(c=>s(c),{acceptNode:s}),a=i.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,l,!1);for(;a.nextNode();)t(a.currentNode)})}function Tn(e){throw new Error("Unexpected object: "+e)}var D=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(D||{});function Xe(e,s){let t=s.resolveItems();if(t.length<=0)return null;let o=s.resolveActiveIndex(),n=o??-1;switch(e.focus){case 0:{for(let i=0;i<t.length;++i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 1:{n===-1&&(n=t.length);for(let i=n-1;i>=0;--i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 2:{for(let i=n+1;i<t.length;++i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 3:{for(let i=t.length-1;i>=0;--i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 4:{for(let i=0;i<t.length;++i)if(s.resolveId(t[i],i,t)===e.id)return i;return o}case 5:return null;default:Tn(e)}}var Rn={};function $n(e,s){return e===s}var An=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(An||{}),Pn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Pn||{}),_n=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(_n||{});let mt=Symbol("ComboboxContext");function Se(e){let s=at(mt,null);if(s===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Se),t}return s}let gt=Symbol("VirtualContext"),Fn=ne({name:"VirtualProvider",setup(e,{slots:s}){let t=Se("VirtualProvider"),o=k(()=>{let a=z(t.optionsRef);if(!a)return{start:0,end:0};let c=window.getComputedStyle(a);return{start:parseFloat(c.paddingBlockStart||c.paddingTop),end:parseFloat(c.paddingBlockEnd||c.paddingBottom)}}),n=kn(k(()=>({scrollPaddingStart:o.value.start,scrollPaddingEnd:o.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return z(t.optionsRef)},overscan:12}))),i=k(()=>{var a;return(a=t.virtual.value)==null?void 0:a.options}),l=N(0);return X([i],()=>{l.value+=1}),it(gt,t.virtual.value?n:null),()=>[Me("div",{style:{position:"relative",width:"100%",height:`${n.value.getTotalSize()}px`},ref:a=>{if(a){if(typeof process<"u"&&Rn.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&n.value.scrollToIndex(t.activeOptionIndex.value)}}},n.value.getVirtualItems().map(a=>Dt(s.default({option:t.virtual.value.options[a.index],open:t.comboboxState.value===0})[0],{key:`${l.value}-${a.index}`,"data-index":a.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":a.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${a.start}px)`,overflowAnchor:"none"}})))]}}),Ln=ne({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:s,attrs:t,emit:o}){let n=N(1),i=N(null),l=N(null),a=N(null),c=N(null),u=N({static:!1,hold:!1}),r=N([]),d=N(null),f=N(2),g=N(!1);function O(v=b=>b){let b=d.value!==null?r.value[d.value]:null,M=v(r.value.slice()),p=M.length>0&&M[0].dataRef.order.value!==null?M.sort((I,w)=>I.dataRef.order.value-w.dataRef.order.value):Vt(M,I=>z(I.dataRef.domRef)),m=b?p.indexOf(b):null;return m===-1&&(m=null),{options:p,activeOptionIndex:m}}let T=k(()=>e.multiple?1:0),A=k(()=>e.nullable),[S,C]=hn(k(()=>e.modelValue),v=>o("update:modelValue",v),k(()=>e.defaultValue)),L=k(()=>S.value===void 0?fe(T.value,{1:[],0:void 0}):S.value),y=null,P=null;function $(v){return fe(T.value,{0(){return C==null?void 0:C(v)},1:()=>{let b=se(h.value.value).slice(),M=se(v),p=b.findIndex(m=>h.compare(M,se(m)));return p===-1?b.push(M):b.splice(p,1),C==null?void 0:C(b)}})}let x=k(()=>{});X([x],([v],[b])=>{if(h.virtual.value&&v&&b&&d.value!==null){let M=v.indexOf(b[d.value]);M!==-1?d.value=M:d.value=null}});let h={comboboxState:n,value:L,mode:T,compare(v,b){if(typeof e.by=="string"){let M=e.by;return(v==null?void 0:v[M])===(b==null?void 0:b[M])}return e.by===null?$n(v,b):e.by(v,b)},calculateIndex(v){return h.virtual.value?e.by===null?h.virtual.value.options.indexOf(v):h.virtual.value.options.findIndex(b=>h.compare(b,v)):r.value.findIndex(b=>h.compare(b.dataRef.value,v))},defaultValue:k(()=>e.defaultValue),nullable:A,immediate:k(()=>!1),virtual:k(()=>null),inputRef:l,labelRef:i,buttonRef:a,optionsRef:c,disabled:k(()=>e.disabled),options:r,change(v){C(v)},activeOptionIndex:k(()=>{if(g.value&&d.value===null&&(h.virtual.value?h.virtual.value.options.length>0:r.value.length>0)){if(h.virtual.value){let b=h.virtual.value.options.findIndex(M=>{var p;return!((p=h.virtual.value)!=null&&p.disabled(M))});if(b!==-1)return b}let v=r.value.findIndex(b=>!b.dataRef.disabled);if(v!==-1)return v}return d.value}),activationTrigger:f,optionsPropsRef:u,closeCombobox(){g.value=!1,!e.disabled&&n.value!==1&&(n.value=1,d.value=null)},openCombobox(){if(g.value=!0,!e.disabled&&n.value!==0){if(h.value.value){let v=h.calculateIndex(h.value.value);v!==-1&&(d.value=v)}n.value=0}},setActivationTrigger(v){f.value=v},goToOption(v,b,M){g.value=!1,y!==null&&cancelAnimationFrame(y),y=requestAnimationFrame(()=>{if(e.disabled||c.value&&!u.value.static&&n.value===1)return;if(h.virtual.value){d.value=v===D.Specific?b:Xe({focus:v},{resolveItems:()=>h.virtual.value.options,resolveActiveIndex:()=>{var I,w;return(w=(I=h.activeOptionIndex.value)!=null?I:h.virtual.value.options.findIndex(_=>{var V;return!((V=h.virtual.value)!=null&&V.disabled(_))}))!=null?w:null},resolveDisabled:I=>h.virtual.value.disabled(I),resolveId(){throw new Error("Function not implemented.")}}),f.value=M??2;return}let p=O();if(p.activeOptionIndex===null){let I=p.options.findIndex(w=>!w.dataRef.disabled);I!==-1&&(p.activeOptionIndex=I)}let m=v===D.Specific?b:Xe({focus:v},{resolveItems:()=>p.options,resolveActiveIndex:()=>p.activeOptionIndex,resolveId:I=>I.id,resolveDisabled:I=>I.dataRef.disabled});d.value=m,f.value=M??2,r.value=p.options})},selectOption(v){let b=r.value.find(p=>p.id===v);if(!b)return;let{dataRef:M}=b;$(M.value)},selectActiveOption(){if(h.activeOptionIndex.value!==null){if(h.virtual.value)$(h.virtual.value.options[h.activeOptionIndex.value]);else{let{dataRef:v}=r.value[h.activeOptionIndex.value];$(v.value)}h.goToOption(D.Specific,h.activeOptionIndex.value)}},registerOption(v,b){let M=Pt({id:v,dataRef:b});if(h.virtual.value){r.value.push(M);return}P&&cancelAnimationFrame(P);let p=O(m=>(m.push(M),m));d.value===null&&h.isSelected(b.value.value)&&(p.activeOptionIndex=p.options.indexOf(M)),r.value=p.options,d.value=p.activeOptionIndex,f.value=2,p.options.some(m=>!z(m.dataRef.domRef))&&(P=requestAnimationFrame(()=>{let m=O();r.value=m.options,d.value=m.activeOptionIndex}))},unregisterOption(v,b){if(y!==null&&cancelAnimationFrame(y),b&&(g.value=!0),h.virtual.value){r.value=r.value.filter(p=>p.id!==v);return}let M=O(p=>{let m=p.findIndex(I=>I.id===v);return m!==-1&&p.splice(m,1),p});r.value=M.options,d.value=M.activeOptionIndex,f.value=2},isSelected(v){return fe(T.value,{0:()=>h.compare(se(h.value.value),se(v)),1:()=>se(h.value.value).some(b=>h.compare(se(b),se(v)))})},isActive(v){return d.value===h.calculateIndex(v)}};_t([l,a,c],()=>h.closeCombobox(),k(()=>n.value===0)),it(mt,h),Ft(k(()=>fe(n.value,{0:we.Open,1:we.Closed})));let R=k(()=>{var v;return(v=z(l))==null?void 0:v.closest("form")});return ye(()=>{X([R],()=>{if(!R.value||e.defaultValue===void 0)return;function v(){h.change(e.defaultValue)}return R.value.addEventListener("reset",v),()=>{var b;(b=R.value)==null||b.removeEventListener("reset",v)}},{immediate:!0})}),()=>{var v,b,M;let{name:p,disabled:m,form:I,...w}=e,_={open:n.value===0,disabled:m,activeIndex:h.activeOptionIndex.value,activeOption:h.activeOptionIndex.value===null?null:h.virtual.value?h.virtual.value.options[(v=h.activeOptionIndex.value)!=null?v:0]:(M=(b=h.options.value[h.activeOptionIndex.value])==null?void 0:b.dataRef.value)!=null?M:null,value:L.value};return Me(ke,[...p!=null&&L.value!=null?fn({[p]:L.value}).map(([V,ae])=>Me(Lt,Bt({features:zt.Hidden,key:V,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:I,name:V,value:ae}))):[],$e({theirProps:{...t,...Ve(w,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:_,slots:s,attrs:t,name:"Combobox"})])}}}),Bn=ne({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:s,attrs:t,slots:o,expose:n}){var i;let l=(i=e.id)!=null?i:`headlessui-combobox-input-${je()}`,a=Se("ComboboxInput"),c=k(()=>ot(z(a.inputRef))),u={value:!1};n({el:a.inputRef,$el:a.inputRef});function r(){a.change(null);let y=z(a.optionsRef);y&&(y.scrollTop=0),a.goToOption(D.Nothing)}let d=k(()=>{var y;let P=a.value.value;return z(a.inputRef)?typeof e.displayValue<"u"&&P!==void 0?(y=e.displayValue(P))!=null?y:"":typeof P=="string"?P:"":""});ye(()=>{X([d,a.comboboxState,c],([y,P],[$,x])=>{if(u.value)return;let h=z(a.inputRef);h&&((x===0&&P===1||y!==$)&&(h.value=y),requestAnimationFrame(()=>{var R;if(u.value||!h||((R=c.value)==null?void 0:R.activeElement)!==h)return;let{selectionStart:v,selectionEnd:b}=h;Math.abs((b??0)-(v??0))===0&&v===0&&h.setSelectionRange(h.value.length,h.value.length)}))},{immediate:!0}),X([a.comboboxState],([y],[P])=>{if(y===0&&P===1){if(u.value)return;let $=z(a.inputRef);if(!$)return;let x=$.value,{selectionStart:h,selectionEnd:R,selectionDirection:v}=$;$.value="",$.value=x,v!==null?$.setSelectionRange(h,R,v):$.setSelectionRange(h,R)}})});let f=N(!1);function g(){f.value=!0}function O(){Ye().nextFrame(()=>{f.value=!1})}function T(y){switch(u.value=!0,y.key){case Z.Enter:if(u.value=!1,a.comboboxState.value!==0||f.value)return;if(y.preventDefault(),y.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case Z.ArrowDown:return u.value=!1,y.preventDefault(),y.stopPropagation(),fe(a.comboboxState.value,{0:()=>a.goToOption(D.Next),1:()=>a.openCombobox()});case Z.ArrowUp:return u.value=!1,y.preventDefault(),y.stopPropagation(),fe(a.comboboxState.value,{0:()=>a.goToOption(D.Previous),1:()=>{a.openCombobox(),lt(()=>{a.value.value||a.goToOption(D.Last)})}});case Z.Home:if(y.shiftKey)break;return u.value=!1,y.preventDefault(),y.stopPropagation(),a.goToOption(D.First);case Z.PageUp:return u.value=!1,y.preventDefault(),y.stopPropagation(),a.goToOption(D.First);case Z.End:if(y.shiftKey)break;return u.value=!1,y.preventDefault(),y.stopPropagation(),a.goToOption(D.Last);case Z.PageDown:return u.value=!1,y.preventDefault(),y.stopPropagation(),a.goToOption(D.Last);case Z.Escape:if(u.value=!1,a.comboboxState.value!==0)return;y.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&y.stopPropagation(),a.nullable.value&&a.mode.value===0&&a.value.value===null&&r(),a.closeCombobox();break;case Z.Tab:if(u.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.activationTrigger.value!==1&&a.selectActiveOption(),a.closeCombobox();break}}function A(y){s("change",y),a.nullable.value&&a.mode.value===0&&y.target.value===""&&r(),a.openCombobox()}function S(y){var P,$,x;let h=(P=y.relatedTarget)!=null?P:Je.find(R=>R!==y.currentTarget);if(u.value=!1,!(($=z(a.optionsRef))!=null&&$.contains(h))&&!((x=z(a.buttonRef))!=null&&x.contains(h))&&a.comboboxState.value===0)return y.preventDefault(),a.mode.value===0&&(a.nullable.value&&a.value.value===null?r():a.activationTrigger.value!==1&&a.selectActiveOption()),a.closeCombobox()}function C(y){var P,$,x;let h=(P=y.relatedTarget)!=null?P:Je.find(R=>R!==y.currentTarget);($=z(a.buttonRef))!=null&&$.contains(h)||(x=z(a.optionsRef))!=null&&x.contains(h)||a.disabled.value||a.immediate.value&&a.comboboxState.value!==0&&(a.openCombobox(),Ye().nextFrame(()=>{a.setActivationTrigger(1)}))}let L=k(()=>{var y,P,$,x;return(x=($=(P=e.defaultValue)!=null?P:a.defaultValue.value!==void 0?(y=e.displayValue)==null?void 0:y.call(e,a.defaultValue.value):null)!=null?$:a.defaultValue.value)!=null?x:""});return()=>{var y,P,$,x,h,R,v;let b={open:a.comboboxState.value===0},{displayValue:M,onChange:p,...m}=e,I={"aria-controls":(y=a.optionsRef.value)==null?void 0:y.id,"aria-expanded":a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null?void 0:a.virtual.value?(P=a.options.value.find(w=>!a.virtual.value.disabled(w.dataRef.value)&&a.compare(w.dataRef.value,a.virtual.value.options[a.activeOptionIndex.value])))==null?void 0:P.id:($=a.options.value[a.activeOptionIndex.value])==null?void 0:$.id,"aria-labelledby":(R=(x=z(a.labelRef))==null?void 0:x.id)!=null?R:(h=z(a.buttonRef))==null?void 0:h.id,"aria-autocomplete":"list",id:l,onCompositionstart:g,onCompositionend:O,onKeydown:T,onInput:A,onFocus:C,onBlur:S,role:"combobox",type:(v=t.type)!=null?v:"text",tabIndex:0,ref:a.inputRef,defaultValue:L.value,disabled:a.disabled.value===!0?!0:void 0};return $e({ourProps:I,theirProps:m,slot:b,attrs:t,slots:o,features:Ce.RenderStrategy|Ce.Static,name:"ComboboxInput"})}}}),zn=ne({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:s,slots:t,expose:o}){let n=Se("ComboboxOptions"),i=`headlessui-combobox-options-${je()}`;o({el:n.optionsRef,$el:n.optionsRef}),be(()=>{n.optionsPropsRef.value.static=e.static}),be(()=>{n.optionsPropsRef.value.hold=e.hold});let l=Nt(),a=k(()=>l!==null?(l.value&we.Open)===we.Open:n.comboboxState.value===0);return En({container:k(()=>z(n.optionsRef)),enabled:k(()=>n.comboboxState.value===0),accept(c){return c.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}}),()=>{var c,u,r;let d={open:n.comboboxState.value===0},f={"aria-labelledby":(r=(c=z(n.labelRef))==null?void 0:c.id)!=null?r:(u=z(n.buttonRef))==null?void 0:u.id,id:i,ref:n.optionsRef,role:"listbox","aria-multiselectable":n.mode.value===1?!0:void 0},g=Ve(e,["hold"]);return $e({ourProps:f,theirProps:g,slot:d,attrs:s,slots:n.virtual.value&&n.comboboxState.value===0?{...t,default:()=>[Me(Fn,{},t.default)]}:t,features:Ce.RenderStrategy|Ce.Static,visible:a.value,name:"ComboboxOptions"})}}}),Nn=ne({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:s,attrs:t,expose:o}){let n=Se("ComboboxOption"),i=`headlessui-combobox-option-${je()}`,l=N(null);o({el:l,$el:l});let a=k(()=>{var S;return n.virtual.value?n.activeOptionIndex.value===n.calculateIndex(e.value):n.activeOptionIndex.value===null?!1:((S=n.options.value[n.activeOptionIndex.value])==null?void 0:S.id)===i}),c=k(()=>n.isSelected(e.value)),u=at(gt,null),r=k(()=>({disabled:e.disabled,value:e.value,domRef:l,order:k(()=>e.order)}));ye(()=>n.registerOption(i,r)),jt(()=>n.unregisterOption(i,a.value)),be(()=>{let S=z(l);S&&(u==null||u.value.measureElement(S))}),be(()=>{n.comboboxState.value===0&&a.value&&(n.virtual.value||n.activationTrigger.value!==0&&lt(()=>{var S,C;return(C=(S=z(l))==null?void 0:S.scrollIntoView)==null?void 0:C.call(S,{block:"nearest"})}))});function d(S){var C;if(e.disabled||(C=n.virtual.value)!=null&&C.disabled(e.value))return S.preventDefault();n.selectOption(i),Kt()||requestAnimationFrame(()=>{var L;return(L=z(n.inputRef))==null?void 0:L.focus({preventScroll:!0})}),n.mode.value===0&&requestAnimationFrame(()=>n.closeCombobox())}function f(){var S;if(e.disabled||(S=n.virtual.value)!=null&&S.disabled(e.value))return n.goToOption(D.Nothing);let C=n.calculateIndex(e.value);n.goToOption(D.Specific,C)}let g=Cn();function O(S){g.update(S)}function T(S){var C;if(!g.wasMoved(S)||e.disabled||(C=n.virtual.value)!=null&&C.disabled(e.value)||a.value)return;let L=n.calculateIndex(e.value);n.goToOption(D.Specific,L,0)}function A(S){var C;g.wasMoved(S)&&(e.disabled||(C=n.virtual.value)!=null&&C.disabled(e.value)||a.value&&(n.optionsPropsRef.value.hold||n.goToOption(D.Nothing)))}return()=>{let{disabled:S}=e,C={active:a.value,selected:c.value,disabled:S},L={id:i,ref:l,role:"option",tabIndex:S===!0?void 0:-1,"aria-disabled":S===!0?!0:void 0,"aria-selected":c.value,disabled:void 0,onClick:d,onFocus:f,onPointerenter:O,onMouseenter:O,onPointermove:T,onMousemove:T,onPointerleave:A,onMouseleave:A},y=Ve(e,["order","value"]);return $e({ourProps:L,theirProps:y,slot:C,attrs:t,slots:s,name:"ComboboxOption"})}}});function te(e){return Array.isArray?Array.isArray(e):xt(e)==="[object Array]"}const Dn=1/0;function Vn(e){if(typeof e=="string")return e;let s=e+"";return s=="0"&&1/e==-Dn?"-0":s}function jn(e){return e==null?"":Vn(e)}function Q(e){return typeof e=="string"}function bt(e){return typeof e=="number"}function Kn(e){return e===!0||e===!1||Un(e)&&xt(e)=="[object Boolean]"}function yt(e){return typeof e=="object"}function Un(e){return yt(e)&&e!==null}function U(e){return e!=null}function _e(e){return!e.trim().length}function xt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Hn="Incorrect 'index' type",Wn=e=>`Invalid value for key ${e}`,qn=e=>`Pattern length exceeds max of ${e}.`,Gn=e=>`Missing ${e} property in key`,Yn=e=>`Property 'weight' in key '${e}' must be a positive integer`,Ze=Object.prototype.hasOwnProperty;class Jn{constructor(s){this._keys=[],this._keyMap={};let t=0;s.forEach(o=>{let n=St(o);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(o=>{o.weight/=t})}get(s){return this._keyMap[s]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function St(e){let s=null,t=null,o=null,n=1,i=null;if(Q(e)||te(e))o=e,s=et(e),t=Fe(e);else{if(!Ze.call(e,"name"))throw new Error(Gn("name"));const l=e.name;if(o=l,Ze.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(Yn(l));s=et(l),t=Fe(l),i=e.getFn}return{path:s,id:t,weight:n,src:o,getFn:i}}function et(e){return te(e)?e:e.split(".")}function Fe(e){return te(e)?e.join("."):e}function Qn(e,s){let t=[],o=!1;const n=(i,l,a)=>{if(U(i))if(!l[a])t.push(i);else{let c=l[a];const u=i[c];if(!U(u))return;if(a===l.length-1&&(Q(u)||bt(u)||Kn(u)))t.push(jn(u));else if(te(u)){o=!0;for(let r=0,d=u.length;r<d;r+=1)n(u[r],l,a+1)}else l.length&&n(u,l,a+1)}};return n(e,Q(s)?s.split("."):s,0),o?t:t[0]}const Xn={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Zn={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,s)=>e.score===s.score?e.idx<s.idx?-1:1:e.score<s.score?-1:1},es={location:0,threshold:.6,distance:100},ts={useExtendedSearch:!1,getFn:Qn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var E={...Zn,...Xn,...es,...ts};const ns=/[^ ]+/g;function ss(e=1,s=3){const t=new Map,o=Math.pow(10,s);return{get(n){const i=n.match(ns).length;if(t.has(i))return t.get(i);const l=1/Math.pow(i,.5*e),a=parseFloat(Math.round(l*o)/o);return t.set(i,a),a},clear(){t.clear()}}}class qe{constructor({getFn:s=E.getFn,fieldNormWeight:t=E.fieldNormWeight}={}){this.norm=ss(t,3),this.getFn=s,this.isCreated=!1,this.setIndexRecords()}setSources(s=[]){this.docs=s}setIndexRecords(s=[]){this.records=s}setKeys(s=[]){this.keys=s,this._keysMap={},s.forEach((t,o)=>{this._keysMap[t.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Q(this.docs[0])?this.docs.forEach((s,t)=>{this._addString(s,t)}):this.docs.forEach((s,t)=>{this._addObject(s,t)}),this.norm.clear())}add(s){const t=this.size();Q(s)?this._addString(s,t):this._addObject(s,t)}removeAt(s){this.records.splice(s,1);for(let t=s,o=this.size();t<o;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(s,t){return s[this._keysMap[t]]}size(){return this.records.length}_addString(s,t){if(!U(s)||_e(s))return;let o={v:s,i:t,n:this.norm.get(s)};this.records.push(o)}_addObject(s,t){let o={i:t,$:{}};this.keys.forEach((n,i)=>{let l=n.getFn?n.getFn(s):this.getFn(s,n.path);if(U(l)){if(te(l)){let a=[];const c=[{nestedArrIndex:-1,value:l}];for(;c.length;){const{nestedArrIndex:u,value:r}=c.pop();if(U(r))if(Q(r)&&!_e(r)){let d={v:r,i:u,n:this.norm.get(r)};a.push(d)}else te(r)&&r.forEach((d,f)=>{c.push({nestedArrIndex:f,value:d})})}o.$[i]=a}else if(Q(l)&&!_e(l)){let a={v:l,n:this.norm.get(l)};o.$[i]=a}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function It(e,s,{getFn:t=E.getFn,fieldNormWeight:o=E.fieldNormWeight}={}){const n=new qe({getFn:t,fieldNormWeight:o});return n.setKeys(e.map(St)),n.setSources(s),n.create(),n}function os(e,{getFn:s=E.getFn,fieldNormWeight:t=E.fieldNormWeight}={}){const{keys:o,records:n}=e,i=new qe({getFn:s,fieldNormWeight:t});return i.setKeys(o),i.setIndexRecords(n),i}function Oe(e,{errors:s=0,currentLocation:t=0,expectedLocation:o=0,distance:n=E.distance,ignoreLocation:i=E.ignoreLocation}={}){const l=s/e.length;if(i)return l;const a=Math.abs(o-t);return n?l+a/n:a?1:l}function is(e=[],s=E.minMatchCharLength){let t=[],o=-1,n=-1,i=0;for(let l=e.length;i<l;i+=1){let a=e[i];a&&o===-1?o=i:!a&&o!==-1&&(n=i-1,n-o+1>=s&&t.push([o,n]),o=-1)}return e[i-1]&&i-o>=s&&t.push([o,i-1]),t}const re=32;function as(e,s,t,{location:o=E.location,distance:n=E.distance,threshold:i=E.threshold,findAllMatches:l=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,includeMatches:c=E.includeMatches,ignoreLocation:u=E.ignoreLocation}={}){if(s.length>re)throw new Error(qn(re));const r=s.length,d=e.length,f=Math.max(0,Math.min(o,d));let g=i,O=f;const T=a>1||c,A=T?Array(d):[];let S;for(;(S=e.indexOf(s,O))>-1;){let x=Oe(s,{currentLocation:S,expectedLocation:f,distance:n,ignoreLocation:u});if(g=Math.min(x,g),O=S+r,T){let h=0;for(;h<r;)A[S+h]=1,h+=1}}O=-1;let C=[],L=1,y=r+d;const P=1<<r-1;for(let x=0;x<r;x+=1){let h=0,R=y;for(;h<R;)Oe(s,{errors:x,currentLocation:f+R,expectedLocation:f,distance:n,ignoreLocation:u})<=g?h=R:y=R,R=Math.floor((y-h)/2+h);y=R;let v=Math.max(1,f-R+1),b=l?d:Math.min(f+R,d)+r,M=Array(b+2);M[b+1]=(1<<x)-1;for(let m=b;m>=v;m-=1){let I=m-1,w=t[e.charAt(I)];if(T&&(A[I]=+!!w),M[m]=(M[m+1]<<1|1)&w,x&&(M[m]|=(C[m+1]|C[m])<<1|1|C[m+1]),M[m]&P&&(L=Oe(s,{errors:x,currentLocation:I,expectedLocation:f,distance:n,ignoreLocation:u}),L<=g)){if(g=L,O=I,O<=f)break;v=Math.max(1,2*f-O)}}if(Oe(s,{errors:x+1,currentLocation:f,expectedLocation:f,distance:n,ignoreLocation:u})>g)break;C=M}const $={isMatch:O>=0,score:Math.max(.001,L)};if(T){const x=is(A,a);x.length?c&&($.indices=x):$.isMatch=!1}return $}function ls(e){let s={};for(let t=0,o=e.length;t<o;t+=1){const n=e.charAt(t);s[n]=(s[n]||0)|1<<o-t-1}return s}class Ot{constructor(s,{location:t=E.location,threshold:o=E.threshold,distance:n=E.distance,includeMatches:i=E.includeMatches,findAllMatches:l=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,isCaseSensitive:c=E.isCaseSensitive,ignoreLocation:u=E.ignoreLocation}={}){if(this.options={location:t,threshold:o,distance:n,includeMatches:i,findAllMatches:l,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?s:s.toLowerCase(),this.chunks=[],!this.pattern.length)return;const r=(f,g)=>{this.chunks.push({pattern:f,alphabet:ls(f),startIndex:g})},d=this.pattern.length;if(d>re){let f=0;const g=d%re,O=d-g;for(;f<O;)r(this.pattern.substr(f,re),f),f+=re;if(g){const T=d-re;r(this.pattern.substr(T),T)}}else r(this.pattern,0)}searchIn(s){const{isCaseSensitive:t,includeMatches:o}=this.options;if(t||(s=s.toLowerCase()),this.pattern===s){let O={isMatch:!0,score:0};return o&&(O.indices=[[0,s.length-1]]),O}const{location:n,distance:i,threshold:l,findAllMatches:a,minMatchCharLength:c,ignoreLocation:u}=this.options;let r=[],d=0,f=!1;this.chunks.forEach(({pattern:O,alphabet:T,startIndex:A})=>{const{isMatch:S,score:C,indices:L}=as(s,O,T,{location:n+A,distance:i,threshold:l,findAllMatches:a,minMatchCharLength:c,includeMatches:o,ignoreLocation:u});S&&(f=!0),d+=C,S&&L&&(r=[...r,...L])});let g={isMatch:f,score:f?d/this.chunks.length:1};return f&&o&&(g.indices=r),g}}class ie{constructor(s){this.pattern=s}static isMultiMatch(s){return tt(s,this.multiRegex)}static isSingleMatch(s){return tt(s,this.singleRegex)}search(){}}function tt(e,s){const t=e.match(s);return t?t[1]:null}class rs extends ie{constructor(s){super(s)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(s){const t=s===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class us extends ie{constructor(s){super(s)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(s){const o=s.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,s.length-1]}}}class cs extends ie{constructor(s){super(s)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(s){const t=s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class ds extends ie{constructor(s){super(s)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(s){const t=!s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class hs extends ie{constructor(s){super(s)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(s){const t=s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[s.length-this.pattern.length,s.length-1]}}}class fs extends ie{constructor(s){super(s)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(s){const t=!s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class wt extends ie{constructor(s,{location:t=E.location,threshold:o=E.threshold,distance:n=E.distance,includeMatches:i=E.includeMatches,findAllMatches:l=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,isCaseSensitive:c=E.isCaseSensitive,ignoreLocation:u=E.ignoreLocation}={}){super(s),this._bitapSearch=new Ot(s,{location:t,threshold:o,distance:n,includeMatches:i,findAllMatches:l,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(s){return this._bitapSearch.searchIn(s)}}class Mt extends ie{constructor(s){super(s)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(s){let t=0,o;const n=[],i=this.pattern.length;for(;(o=s.indexOf(this.pattern,t))>-1;)t=o+i,n.push([o,t-1]);const l=!!n.length;return{isMatch:l,score:l?0:1,indices:n}}}const Le=[rs,Mt,cs,ds,fs,hs,us,wt],nt=Le.length,ps=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,vs="|";function ms(e,s={}){return e.split(vs).map(t=>{let o=t.trim().split(ps).filter(i=>i&&!!i.trim()),n=[];for(let i=0,l=o.length;i<l;i+=1){const a=o[i];let c=!1,u=-1;for(;!c&&++u<nt;){const r=Le[u];let d=r.isMultiMatch(a);d&&(n.push(new r(d,s)),c=!0)}if(!c)for(u=-1;++u<nt;){const r=Le[u];let d=r.isSingleMatch(a);if(d){n.push(new r(d,s));break}}}return n})}const gs=new Set([wt.type,Mt.type]);class bs{constructor(s,{isCaseSensitive:t=E.isCaseSensitive,includeMatches:o=E.includeMatches,minMatchCharLength:n=E.minMatchCharLength,ignoreLocation:i=E.ignoreLocation,findAllMatches:l=E.findAllMatches,location:a=E.location,threshold:c=E.threshold,distance:u=E.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:o,minMatchCharLength:n,findAllMatches:l,ignoreLocation:i,location:a,threshold:c,distance:u},this.pattern=t?s:s.toLowerCase(),this.query=ms(this.pattern,this.options)}static condition(s,t){return t.useExtendedSearch}searchIn(s){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:n}=this.options;s=n?s:s.toLowerCase();let i=0,l=[],a=0;for(let c=0,u=t.length;c<u;c+=1){const r=t[c];l.length=0,i=0;for(let d=0,f=r.length;d<f;d+=1){const g=r[d],{isMatch:O,indices:T,score:A}=g.search(s);if(O){if(i+=1,a+=A,o){const S=g.constructor.type;gs.has(S)?l=[...l,...T]:l.push(T)}}else{a=0,i=0,l.length=0;break}}if(i){let d={isMatch:!0,score:a/i};return o&&(d.indices=l),d}}return{isMatch:!1,score:1}}}const Be=[];function ys(...e){Be.push(...e)}function ze(e,s){for(let t=0,o=Be.length;t<o;t+=1){let n=Be[t];if(n.condition(e,s))return new n(e,s)}return new Ot(e,s)}const Re={AND:"$and",OR:"$or"},Ne={PATH:"$path",PATTERN:"$val"},De=e=>!!(e[Re.AND]||e[Re.OR]),xs=e=>!!e[Ne.PATH],Ss=e=>!te(e)&&yt(e)&&!De(e),st=e=>({[Re.AND]:Object.keys(e).map(s=>({[s]:e[s]}))});function kt(e,s,{auto:t=!0}={}){const o=n=>{let i=Object.keys(n);const l=xs(n);if(!l&&i.length>1&&!De(n))return o(st(n));if(Ss(n)){const c=l?n[Ne.PATH]:i[0],u=l?n[Ne.PATTERN]:n[c];if(!Q(u))throw new Error(Wn(c));const r={keyId:Fe(c),pattern:u};return t&&(r.searcher=ze(u,s)),r}let a={children:[],operator:i[0]};return i.forEach(c=>{const u=n[c];te(u)&&u.forEach(r=>{a.children.push(o(r))})}),a};return De(e)||(e=st(e)),o(e)}function Is(e,{ignoreFieldNorm:s=E.ignoreFieldNorm}){e.forEach(t=>{let o=1;t.matches.forEach(({key:n,norm:i,score:l})=>{const a=n?n.weight:null;o*=Math.pow(l===0&&a?Number.EPSILON:l,(a||1)*(s?1:i))}),t.score=o})}function Os(e,s){const t=e.matches;s.matches=[],U(t)&&t.forEach(o=>{if(!U(o.indices)||!o.indices.length)return;const{indices:n,value:i}=o;let l={indices:n,value:i};o.key&&(l.key=o.key.src),o.idx>-1&&(l.refIndex=o.idx),s.matches.push(l)})}function ws(e,s){s.score=e.score}function Ms(e,s,{includeMatches:t=E.includeMatches,includeScore:o=E.includeScore}={}){const n=[];return t&&n.push(Os),o&&n.push(ws),e.map(i=>{const{idx:l}=i,a={item:s[l],refIndex:l};return n.length&&n.forEach(c=>{c(i,a)}),a})}class pe{constructor(s,t={},o){this.options={...E,...t},this.options.useExtendedSearch,this._keyStore=new Jn(this.options.keys),this.setCollection(s,o)}setCollection(s,t){if(this._docs=s,t&&!(t instanceof qe))throw new Error(Hn);this._myIndex=t||It(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(s){U(s)&&(this._docs.push(s),this._myIndex.add(s))}remove(s=()=>!1){const t=[];for(let o=0,n=this._docs.length;o<n;o+=1){const i=this._docs[o];s(i,o)&&(this.removeAt(o),o-=1,n-=1,t.push(i))}return t}removeAt(s){this._docs.splice(s,1),this._myIndex.removeAt(s)}getIndex(){return this._myIndex}search(s,{limit:t=-1}={}){const{includeMatches:o,includeScore:n,shouldSort:i,sortFn:l,ignoreFieldNorm:a}=this.options;let c=Q(s)?Q(this._docs[0])?this._searchStringList(s):this._searchObjectList(s):this._searchLogical(s);return Is(c,{ignoreFieldNorm:a}),i&&c.sort(l),bt(t)&&t>-1&&(c=c.slice(0,t)),Ms(c,this._docs,{includeMatches:o,includeScore:n})}_searchStringList(s){const t=ze(s,this.options),{records:o}=this._myIndex,n=[];return o.forEach(({v:i,i:l,n:a})=>{if(!U(i))return;const{isMatch:c,score:u,indices:r}=t.searchIn(i);c&&n.push({item:i,idx:l,matches:[{score:u,value:i,norm:a,indices:r}]})}),n}_searchLogical(s){const t=kt(s,this.options),o=(a,c,u)=>{if(!a.children){const{keyId:d,searcher:f}=a,g=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(c,d),searcher:f});return g&&g.length?[{idx:u,item:c,matches:g}]:[]}const r=[];for(let d=0,f=a.children.length;d<f;d+=1){const g=a.children[d],O=o(g,c,u);if(O.length)r.push(...O);else if(a.operator===Re.AND)return[]}return r},n=this._myIndex.records,i={},l=[];return n.forEach(({$:a,i:c})=>{if(U(a)){let u=o(t,a,c);u.length&&(i[c]||(i[c]={idx:c,item:a,matches:[]},l.push(i[c])),u.forEach(({matches:r})=>{i[c].matches.push(...r)}))}}),l}_searchObjectList(s){const t=ze(s,this.options),{keys:o,records:n}=this._myIndex,i=[];return n.forEach(({$:l,i:a})=>{if(!U(l))return;let c=[];o.forEach((u,r)=>{c.push(...this._findMatches({key:u,value:l[r],searcher:t}))}),c.length&&i.push({idx:a,item:l,matches:c})}),i}_findMatches({key:s,value:t,searcher:o}){if(!U(t))return[];let n=[];if(te(t))t.forEach(({v:i,i:l,n:a})=>{if(!U(i))return;const{isMatch:c,score:u,indices:r}=o.searchIn(i);c&&n.push({score:u,key:s,value:i,idx:l,norm:a,indices:r})});else{const{v:i,n:l}=t,{isMatch:a,score:c,indices:u}=o.searchIn(i);a&&n.push({score:c,key:s,value:i,norm:l,indices:u})}return n}}pe.version="6.6.2";pe.createIndex=It;pe.parseIndex=os;pe.config=E;pe.parseQuery=kt;ys(bs);function ks(e,s,t){const o=()=>{var l,a;return new pe((l=J(s))!=null?l:[],(a=J(t))==null?void 0:a.fuseOptions)},n=N(o());X(()=>{var l;return(l=J(t))==null?void 0:l.fuseOptions},()=>{n.value=o()},{deep:!0}),X(()=>J(s),l=>{n.value.setCollection(l)},{deep:!0});const i=k(()=>{const l=J(t);if(l!=null&&l.matchAllWhenSearchEmpty&&!J(e))return J(s).map((c,u)=>({item:c,refIndex:u}));const a=l==null?void 0:l.resultLimit;return n.value.search(J(e),a?{limit:a}:void 0)});return{fuse:n,results:i}}const Cs=ne({components:{HComboboxOption:Nn,UIcon:Ae,UAvatar:rt,UKbd:ft},props:{group:{type:Object,required:!0},query:{type:String,default:""},groupAttribute:{type:String,required:!0},commandAttribute:{type:String,required:!0},selectedIcon:{type:String,required:!0},ui:{type:Object,required:!0}},setup(e){const s=k(()=>{const o=e.group[e.groupAttribute];return typeof o=="function"?o(e.query):o});function t(o,{indices:n,value:i}){if(o===i)return"";let l="",a=0;n.forEach(u=>{const r=u[1]+1,d=r-u[0]>=e.query.length;l+=[i.substring(a,u[0]),d&&"<mark>",i.substring(u[0],r),d&&"</mark>"].filter(Boolean).join(""),a=r}),l+=i.substring(a);const c=l.indexOf("<mark>");return c>60&&(l=`...${l.substring(c-60)}`),l}return Ue(()=>He("$xnpcKX55nb")),{label:s,highlight:t}}}),Es=["aria-label"],Ts=["innerHTML"];function Rs(e,s,t,o,n,i){const l=Ae,a=rt,c=ft,u=ee("HComboboxOption");return B(),H("div",{class:F(e.ui.group.wrapper)},[e.label?(B(),H("h2",{key:0,class:F(e.ui.group.label)},oe(e.label),3)):q("",!0),G("div",{class:F(e.ui.group.container),"aria-label":e.group[e.groupAttribute]},[(B(!0),H(ke,null,Ee(e.group.commands,(r,d)=>(B(),j(u,{key:`${e.group.key}-${d}`,value:r,disabled:r.disabled,as:"template"},{default:Y(({active:f,selected:g})=>[G("div",{class:F([e.ui.group.command.base,f?e.ui.group.command.active:e.ui.group.command.inactive,r.disabled?"cursor-not-allowed":"cursor-pointer"])},[G("div",{class:F(e.ui.group.command.container)},[ue(e.$slots,`${e.group.key}-icon`,{group:e.group,command:r,active:f,selected:g},()=>[r.icon?(B(),j(l,{key:0,name:r.icon,class:F([e.ui.group.command.icon.base,f?e.ui.group.command.icon.active:e.ui.group.command.icon.inactive,r.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):r.avatar?(B(),j(a,ce({key:1},{size:e.ui.group.command.avatar.size,...r.avatar},{class:e.ui.group.command.avatar.base,"aria-hidden":"true"}),null,16,["class"])):r.chip?(B(),H("span",{key:2,class:F(e.ui.group.command.chip.base),style:Ut({background:`#${r.chip}`})},null,6)):q("",!0)]),G("div",{class:F([e.ui.group.command.label,r.disabled&&e.ui.group.command.disabled])},[ue(e.$slots,`${e.group.key}-command`,{group:e.group,command:r,active:f,selected:g},()=>{var O,T;return[r.prefix?(B(),H("span",{key:0,class:F(["flex-shrink-0",r.prefixClass||e.ui.group.command.prefix])},oe(r.prefix),3)):q("",!0),G("span",{class:F(["truncate",{"flex-none":r.suffix||((O=r.matches)==null?void 0:O.length)}])},oe(r[e.commandAttribute]),3),(T=r.matches)!=null&&T.length?(B(),H("span",{key:1,class:F(["truncate",r.suffixClass||e.ui.group.command.suffix]),innerHTML:e.highlight(r[e.commandAttribute],r.matches[0])},null,10,Ts)):r.suffix?(B(),H("span",{key:2,class:F(["truncate",r.suffixClass||e.ui.group.command.suffix])},oe(r.suffix),3)):q("",!0)]})],2)],2),g?(B(),j(l,{key:0,name:e.selectedIcon,class:F(e.ui.group.command.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])):f&&(e.group.active||e.$slots[`${e.group.key}-active`])?ue(e.$slots,`${e.group.key}-active`,{key:1,group:e.group,command:r,active:f,selected:g},()=>[e.group.active?(B(),H("span",{key:0,class:F(e.ui.group.active)},oe(e.group.active),3)):q("",!0)]):ue(e.$slots,`${e.group.key}-inactive`,{key:2,group:e.group,command:r,active:f,selected:g},()=>{var O;return[(O=r.shortcuts)!=null&&O.length?(B(),H("span",{key:0,class:F(e.ui.group.command.shortcuts)},[(B(!0),H(ke,null,Ee(r.shortcuts,T=>(B(),j(c,{key:T},{default:Y(()=>[Ht(oe(T),1)]),_:2},1024))),128))],2)):!r.disabled&&e.group.inactive?(B(),H("span",{key:1,class:F(e.ui.group.inactive)},oe(e.group.inactive),3)):q("",!0)]})],2)]),_:2},1032,["value","disabled"]))),128))],10,Es)],2)}const $s=Ke(Cs,[["render",Rs]]),he=ut(Te.ui.strategy,Te.ui.commandPalette,pn),As=ne({components:{HCombobox:Ln,HComboboxInput:Bn,HComboboxOptions:zn,UIcon:Ae,UButton:ct,CommandPaletteGroup:$s},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:null},by:{type:String,default:"id"},multiple:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},groups:{type:Array,default:()=>[]},icon:{type:String,default:()=>he.default.icon},loadingIcon:{type:String,default:()=>he.default.loadingIcon},selectedIcon:{type:String,default:()=>he.default.selectedIcon},closeButton:{type:Object,default:()=>he.default.closeButton},emptyState:{type:Object,default:()=>he.default.emptyState},placeholder:{type:String,default:"Search..."},groupAttribute:{type:String,default:"label"},commandAttribute:{type:String,default:"label"},autoselect:{type:Boolean,default:!0},autoclear:{type:Boolean,default:!0},debounce:{type:Number,default:200},fuse:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:s,expose:t}){const{ui:o,attrs:n}=We("commandPalette",xe(e,"ui"),he,xe(e,"class")),i=N(""),l=N(),a=N(null),c=N(!1);ye(()=>{e.autoselect&&y()}),ye(()=>{setTimeout(()=>{var R;const x=(R=l.value)==null?void 0:R.$.provides;if(!x)return;const h=Object.getOwnPropertySymbols(x);a.value=h.length&&x[h[0]]},200)});const u=k(()=>dt({},e.fuse,{fuseOptions:{keys:[e.commandAttribute]},resultLimit:12,matchAllWhenSearchEmpty:!0})),r=k(()=>{var h;const x=[];for(const R of e.groups)R.search||x.push(...((h=R.commands)==null?void 0:h.map(v=>({...v,group:R.key})))||[]);return x}),d=N({}),{results:f}=ks(i,r,u);function g(x,h){if(x)return x.filter&&typeof x.filter=="function"&&(h=x.filter(i.value,h)),{...x,commands:h.slice(0,u.value.resultLimit)}}const O=k(()=>{if(!f.value)return[];const x=f.value.reduce((v,b)=>{var m;const{item:M,...p}=b;return M.group&&(v[m=M.group]||(v[m]=[]),v[M.group].push({...M,...p})),v},{}),h=Object.entries(x).map(([v,b])=>{const M=e.groups.find(p=>p.key===v);return M?g(M,b):null}).filter(Boolean),R=e.groups.filter(v=>{var b;return!!v.search&&((b=d.value[v.key])==null?void 0:b.length)}).map(v=>{const b=d.value[v.key]||[];return g(v,[...b])});return[...h,...R]}),T=ht(async()=>{const x=e.groups.filter(h=>!!h.search);x.length&&(c.value=!0,await Promise.all(x.map(async h=>{d.value[h.key]=await h.search(i.value)})),c.value=!1,L())},e.debounce);X(i,()=>{T(),L()});const A=k(()=>(e.loading||c.value)&&e.loadingIcon?e.loadingIcon:e.icon),S=k(()=>Wt(o.value.input.icon.base,o.value.input.icon.size,(e.loading||c.value)&&e.loadingIcon&&o.value.input.icon.loading)),C=k(()=>({...o.value.default.emptyState,...e.emptyState}));function L(){setTimeout(()=>{var x;(x=l.value)==null||x.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))},0)}function y(){setTimeout(()=>{var x;(x=l.value)==null||x.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},0)}function P(x){s("update:modelValue",x,{query:i.value}),e.autoclear&&setTimeout(()=>{i.value=""},0)}function $(){i.value?i.value="":s("close")}return t({query:i,updateQuery:x=>{i.value=x},comboboxApi:a,results:f}),Ue(()=>He("$JhxQMScl9J")),{ui:o,attrs:n,groups:O,comboboxInput:l,query:i,iconName:A,iconClass:S,emptyState:C,onSelect:P,onClear:$}}});function Ps(e,s,t,o,n,i){const l=Ae,a=ee("HComboboxInput"),c=ct,u=ee("CommandPaletteGroup"),r=ee("HComboboxOptions"),d=ee("HCombobox");return B(),j(d,ce({by:e.by,"model-value":e.modelValue,multiple:e.multiple,nullable:e.nullable,class:e.ui.wrapper},e.attrs,{as:"div","onUpdate:modelValue":e.onSelect}),{default:Y(()=>[qt(G("div",{class:F(e.ui.input.wrapper)},[e.iconName?(B(),j(l,{key:0,name:e.iconName,class:F(e.iconClass),"aria-hidden":"true"},null,8,["name","class"])):q("",!0),ge(a,{ref:"comboboxInput",value:e.query,class:F([e.ui.input.base,e.ui.input.size,e.ui.input.height,e.ui.input.padding,e.icon&&e.ui.input.icon.padding,e.closeButton&&e.ui.input.closeButton.padding]),placeholder:e.placeholder,"aria-label":e.placeholder,autocomplete:"off",onChange:s[0]||(s[0]=f=>e.query=f.target.value)},null,8,["value","class","placeholder","aria-label"]),e.closeButton?(B(),j(c,ce({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{class:e.ui.input.closeButton.base,onClick:e.onClear}),null,16,["class","onClick"])):q("",!0)],2),[[Gt,e.searchable]]),e.groups.length?(B(),j(r,{key:0,static:"",hold:"",as:"div","aria-label":"Commands",class:F(e.ui.container)},{default:Y(()=>[(B(!0),H(ke,null,Ee(e.groups,f=>(B(),j(u,{key:f.key,query:e.query,group:f,"group-attribute":e.groupAttribute,"command-attribute":e.commandAttribute,"selected-icon":e.selectedIcon,ui:e.ui},Yt({_:2},[Ee(e.$slots,(g,O)=>({name:O,fn:Y(T=>[ue(e.$slots,O,Jt(Qt(T)))])}))]),1032,["query","group","group-attribute","command-attribute","selected-icon","ui"]))),128))]),_:3},8,["class"])):e.emptyState?ue(e.$slots,"empty-state",{key:1},()=>[G("div",{class:F(e.ui.emptyState.wrapper)},[e.emptyState.icon?(B(),j(l,{key:0,name:e.emptyState.icon,class:F(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):q("",!0),G("p",{class:F(e.query?e.ui.emptyState.queryLabel:e.ui.emptyState.label)},oe(e.query?e.emptyState.queryLabel:e.emptyState.label),3)],2)]):q("",!0)]),_:3},16,["by","model-value","multiple","nullable","class","onUpdate:modelValue"])}const _s=Ke(As,[["render",Ps]]),Fs=ut(Te.ui.strategy,Te.ui.modal,vn),Ls=ne({components:{HDialog:Xt,HDialogPanel:Zt,TransitionRoot:en,TransitionChild:tn},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(e,{emit:s}){const{ui:t,attrs:o}=We("modal",xe(e,"ui"),Fs,xe(e,"class")),n=k({get(){return e.modelValue},set(c){s("update:modelValue",c)}}),i=k(()=>e.transition?{...t.value.transition}:{});function l(c){if(e.preventClose){s("close-prevented");return}n.value=c,s("close")}const a=()=>{s("after-leave")};return Ue(()=>He("$HAJMhYDoe7")),{ui:t,attrs:o,isOpen:n,transitionClass:i,onAfterLeave:a,close:l}}});function Bs(e,s,t,o,n,i){const l=ee("TransitionChild"),a=ee("HDialogPanel"),c=ee("HDialog"),u=ee("TransitionRoot");return B(),j(u,{appear:e.appear,show:e.isOpen,as:"template",onAfterLeave:e.onAfterLeave},{default:Y(()=>[ge(c,ce({class:e.ui.wrapper},e.attrs,{onClose:e.close}),{default:Y(()=>[e.overlay?(B(),j(l,ce({key:0,as:"template",appear:e.appear},e.ui.overlay.transition),{default:Y(()=>[G("div",{class:F([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear"])):q("",!0),G("div",{class:F(e.ui.inner)},[G("div",{class:F([e.ui.container,!e.fullscreen&&e.ui.padding])},[ge(l,ce({as:"template",appear:e.appear},e.transitionClass),{default:Y(()=>[ge(a,{class:F([e.ui.base,e.ui.background,e.ui.ring,e.ui.shadow,e.fullscreen?e.ui.fullscreen:[e.ui.width,e.ui.height,e.ui.rounded,e.ui.margin]])},{default:Y(()=>[ue(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear"])],2)],2)]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const zs=Ke(Ls,[["render",Bs]]),Ct=e=>{if(!e.children)return e._path;for(const s of(e==null?void 0:e.children)||[]){const t=Ct(s);if(t)return t}},Et=(e,s)=>{for(const t of s){if(t._path===e&&!t._id)return t.children;if(t.children){const o=Et(e,t.children);if(o)return o}}},Tt=(e,s)=>{for(const t of s){if(t._path===e)return t;if(t.children){const o=Tt(e,t.children);if(o)return o}}},Ns=(e,s,t)=>{let o;const n=(i,l)=>{for(const a of l)if(!(i!=="/"&&a._path==="/")){if(i!=null&&i.startsWith(a._path)&&a[s]&&(o=a[s]),a._path===i)return;a.children&&n(i,a.children)}};return n(e,t),o},Ds=()=>({navBottomLink:Ct,navDirFromPath:Et,navPageFromPath:Tt,navKeyFromPath:Ns});function Vs(...e){return k(()=>e.every(s=>J(s)))}function js(e){return k(()=>!J(e))}const Ks=/^[^-]+.*-.*[^-]+$/,Us=/^[^_]+.*_.*[^_]+$/,Hs=(e,s={})=>{const{macOS:t,usingInput:o}=pt();let n=[];const i=N([]),l=()=>{i.value.splice(0,i.value.length)},a=ht(l,s.chainDelay??800),c=u=>{if(!u.key)return;const r=/^[a-z]{1}$/i.test(u.key);let d;if(i.value.push(u.key),i.value.length>=2){d=i.value.slice(-2).join("-");for(const f of n.filter(g=>g.chained))if(f.key===d){f.condition.value&&(u.preventDefault(),f.handler()),l();return}}for(const f of n.filter(g=>!g.chained))if(u.key.toLowerCase()===f.key&&u.metaKey===f.metaKey&&u.ctrlKey===f.ctrlKey&&!(r&&u.shiftKey!==f.shiftKey)){f.condition.value&&(u.preventDefault(),f.handler()),l();return}a()};n=Object.entries(e).map(([u,r])=>{var O,T;if(!r)return null;let d;u.includes("-")&&u!=="-"&&!((O=u.match(Ks))!=null&&O.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`),u.includes("_")&&u!=="_"&&!((T=u.match(Us))!=null&&T.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`);const f=u.includes("-")&&u!=="-";if(f)d={key:u.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const A=u.toLowerCase().split("_").map(S=>S);d={key:A.filter(S=>!["meta","ctrl","shift","alt"].includes(S)).join("_"),metaKey:A.includes("meta"),ctrlKey:A.includes("ctrl"),shiftKey:A.includes("shift"),altKey:A.includes("alt")}}if(d.chained=f,!t.value&&d.metaKey&&!d.ctrlKey&&(d.metaKey=!1,d.ctrlKey=!0),typeof r=="function"?d.handler=r:typeof r=="object"&&(d={...d,handler:r.handler}),!d.handler)return console.trace("[Shortcut] Invalid value"),null;const g=[];return r.usingInput?typeof r.usingInput=="string"&&g.push(k(()=>o.value===r.usingInput)):g.push(js(o)),d.condition=Vs(...g,...r.whenever||[]),d}).filter(Boolean),nn("keydown",c)},Ys=ne({inheritAttrs:!1,__name:"ContentSearch",props:{modelValue:{type:Boolean,default:void 0},files:{type:Array,default:()=>[]},navigation:{type:Array,default:()=>[]},links:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},fuse:{type:Object,default:()=>({})},hideColorMode:{type:Boolean,default:!1},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:s,emit:t}){const o=sn(),n=k(()=>({padding:"p-0 sm:p-4",rounded:"rounded-none sm:rounded-lg",width:"sm:max-w-3xl",height:"h-dvh sm:h-[28rem]",commandPalette:{input:{height:"h-[--header-height] sm:h-12",icon:{size:"h-5 w-5",padding:"ps-11"}},group:{command:{prefix:"!text-foreground after:content-['_>']"}},container:"scroll-py-10"},fileIcon:{name:"i-heroicons-document-text"},default:{closeButton:{icon:o.ui.icons.close,color:"gray",variant:"ghost",size:"sm"}}})),i=e,l=t,a=on(),{navKeyFromPath:c}=Ds(),{usingInput:u}=pt(),{isContentSearchModalOpen:r}=an(),d=ln(dn),f=rn(),{ui:g,attrs:O}=We("content.search",xe(i,"ui"),n,void 0,!0),T=d.smaller("sm"),A=N();function S(p){var m;return p.icon?p.icon:(m=p.navigation)!=null&&m.icon?p.navigation.icon:(i.navigation&&(p.icon=c(p._path,"icon",i.navigation)),p.icon||g.value.fileIcon.name)}const C=k({get(){return i.modelValue!==void 0?i.modelValue:r.value},set(p){i.modelValue!==void 0?l("update:modelValue",p):r.value=p}}),L=k(()=>dt({},i.fuse,{fuseOptions:{ignoreLocation:!0,includeMatches:!0,threshold:.1,keys:[{name:"title",weight:5},{name:"label",weight:5},{name:"suffix",weight:3},"children.children.value","children.children.children.value","children.children.children.children.value","children.children.children.children.children.value"]},resultLimit:12}));function y(p,m){return p?m:m==null?void 0:m.filter(I=>!I.child)}const P=k(()=>{var m,I;let p=[];return(m=i.navigation)!=null&&m.length&&(i.navigation.some(w=>{var _;return!!((_=w.children)!=null&&_.length)})?p=(i.navigation||[]).map(w=>({key:w._path,label:w.title,commands:(i.files||[]).filter(_=>{var V;return(V=_._path)==null?void 0:V.startsWith(w._path)}).flatMap(_=>x(_,w)),filter:y})):p=[{key:"docs",commands:(i.files||[]).flatMap(w=>x(w)),filter:y}]),[((I=i.links)==null?void 0:I.length)&&{key:"links",label:"Links",commands:i.links.flatMap(w=>[w.to&&{id:a.resolve(w.to).fullPath,...w,icon:w.icon||g.value.fileIcon.name},...(w.children||[]).map(_=>({id:a.resolve(_.to).fullPath,prefix:w.label,suffix:_.description,..._,icon:_.icon||w.icon||g.value.fileIcon.name}))]).filter(Boolean)},...p,...i.groups||[],!(f!=null&&f.forced)&&!i.hideColorMode&&{key:"theme",label:"Theme",commands:[{id:"theme-light",label:"Light",icon:o.ui.icons.light,disabled:f.preference==="light",click:()=>{f.preference="light"}},{id:"theme-dark",label:"Dark",icon:o.ui.icons.dark,disabled:f.preference==="dark",click:()=>{f.preference="dark"}}]}].filter(Boolean)}),$=k(()=>C.value||!u.value);function x(p,m){var w,_,V,ae,ve;const I=(w=un((m==null?void 0:m.children)||[],p))==null?void 0:w.map(({title:W})=>W).join(" > ");return[{id:p._id,label:((_=p.navigation)==null?void 0:_.title)||p.title,title:((V=p.navigation)==null?void 0:V.title)||p.title,prefix:I,to:p._path,suffix:p.description,children:R(v(((ae=p==null?void 0:p.body)==null?void 0:ae.children)||[])),icon:S(p)},...Object.entries(b(((ve=p==null?void 0:p.body)==null?void 0:ve.children)||[])).map(([W,{title:le,children:Ie}])=>{var me;if(le)return{id:`${p._path}${W}`,label:le,prefix:(I?`${I} > `:"")+`${((me=p.navigation)==null?void 0:me.title)||p.title}`,to:`${p._path}${W}`,children:R(Ie),icon:S(p),child:!0}})].filter(Boolean)}function h(p){return(p==null?void 0:p.map(m=>{var I,w;if(["code","code-inline","em","a","strong"].includes(m.tag))return{type:"text",value:((w=(I=m.children)==null?void 0:I.find(_=>_.type==="text"))==null?void 0:w.value)||""};if(m.type==="text")return m}).filter(Boolean))||[]}function R(p){return p.map(m=>{if(["pre","style","video"].includes(m.tag))return;let I=[...m.children||[]];return["p","h1","h2","h3","h4","h5","h6","li","td","th"].includes(m.tag)&&I.length?(I=h(I).reduce((w,_)=>(w.length&&w[w.length-1].type==="text"?w[w.length-1].value+=_.value||"":w.push({..._}),w),[]),{...m,children:I}):{...m,children:R(I)}}).filter(Boolean)}function v(p){const m=[];for(const I of p){if(["h1","h2","h3"].includes(I.tag))break;m.push(I)}return m}function b(p){var _,V,ae,ve;const m={};let I="",w="";for(const W of p)["h1","h2","h3"].includes(W.tag)&&(w=((ae=(V=(_=W.children)==null?void 0:_.map(le=>{var Ie,me;if(le.type==="text")return le.value;if(["code","code-inline","em","a","strong"].includes(le.tag))return(me=(Ie=le.children)==null?void 0:Ie.find(Rt=>Rt.type==="text"))==null?void 0:me.value}))==null?void 0:V.filter(Boolean))==null?void 0:ae.join(" "))||"",w&&((ve=W.props)!=null&&ve.id)&&(I=`#${encodeURIComponent(W.props.id)}`)),m[I]?m[I].children.push(W):m[I]={children:[W],title:w};return m}function M(p){C.value=!1;const m=p[0];m&&(m.click?m.click():m.to?m.target==="_blank"||m.to.startsWith("http")?window.open(m.to,m.target||"_blank"):a.push(m.to):m.href&&window.open(m.href,"_blank"))}return Hs({meta_k:{usingInput:!0,whenever:[$],handler:()=>{C.value=!C.value}},escape:{usingInput:!0,whenever:[C],handler:()=>{C.value=!1}}}),s({commandPaletteRef:A}),(p,m)=>{const I=_s,w=zs;return B(),j(w,{modelValue:K(C),"onUpdate:modelValue":m[1]||(m[1]=_=>cn(C)?C.value=_:null),overlay:!K(T),transition:!K(T),ui:K(g)},{default:Y(()=>[ge(I,ce({ref_key:"commandPaletteRef",ref:A,"model-value":[],groups:K(P),ui:K(g).commandPalette,"close-button":K(g).default.closeButton,fuse:K(L),multiple:""},K(O),{"onUpdate:modelValue":M,onClose:m[0]||(m[0]=_=>C.value=!1)}),null,16,["groups","ui","close-button","fuse"])]),_:1},8,["modelValue","overlay","transition","ui"])}}});export{Ys as default};
